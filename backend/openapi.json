{"openapi":"3.0.0","paths":{"/":{"get":{"operationId":"ping","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"string"}}}}}}},"/ping/llm":{"get":{"operationId":"pingLLM","parameters":[],"responses":{"200":{"description":""}}}},"/ping/gen-api":{"get":{"operationId":"pingGenApi","parameters":[],"responses":{"200":{"description":""}}}},"/stories":{"post":{"operationId":"create","summary":"Create a new story","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateStoryDto"}}}},"responses":{"201":{"description":"The story has been successfully created.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StoryDto"}}}}}}},"/stories/{id}":{"get":{"operationId":"findOne","summary":"Get a story by ID","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"The story has been successfully retrieved.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StoryDto"}}}}}}},"/stories/{id}/generate-content":{"put":{"operationId":"generateChaptersContent","summary":"Generate chapters content for a story","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"The content has been successfully generated.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StoryDto"}}}}}}},"/stories/{id}/generate-chapter-media":{"post":{"operationId":"generateStoryChapterMedia","summary":"Generate chapter media for a story","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"The media has been successfully generated.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StoryDto"}}}},"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StoryDto"}}}}}}},"/stories/{id}/generate-media":{"post":{"operationId":"generateFullStoryMedia","summary":"Generate media for a story","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"The media has been successfully generated.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StoryDto"}}}},"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StoryDto"}}}}}}},"/stories/{id}/generate-background-image":{"post":{"operationId":"generateStoryBackgroundImage","summary":"Generate background image for a story","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"The background image has been successfully generated.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StoryDto"}}}},"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StoryDto"}}}}}}},"/stories/create-and-generate":{"post":{"operationId":"createAndGenerate","summary":"Create a new story and generate all content and media","parameters":[],"responses":{"201":{"description":"The story has been created and all content has been generated.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StoryDto"}}}}}}},"/types":{"get":{"operationId":"findAllTypes","parameters":[],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TypeDto"}}}}}}},"/types/{id}":{"get":{"operationId":"findOneType","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}}}},"/types/{id}/stories":{"get":{"operationId":"findAllStoriesByType","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"type":"object"}}}}}}}},"/publishing/{storyId}":{"get":{"operationId":"getPublishing","parameters":[{"name":"storyId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublishingDto"}}}}}}},"/publishing/{storyId}/youtube":{"post":{"operationId":"publishYoutube","parameters":[{"name":"storyId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"201":{"description":"","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/youtube/auth":{"get":{"operationId":"getYoutubeAuthUrl","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"string"}}}}}}},"/youtube/logout":{"get":{"operationId":"youtubeLogout","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/youtube/auth/callback":{"get":{"operationId":"youtubeAuthCallback","parameters":[{"name":"code","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object"}}}}}}}},"info":{"title":"Story Generator","description":"The story generator API description","version":"1.0","contact":{}},"tags":[],"servers":[],"components":{"schemas":{"CreateStoryDto":{"type":"object","properties":{"types_id":{"type":"number","description":"Type id of the story"}},"required":["types_id"]},"ChapterDto":{"type":"object","properties":{"id":{"type":"number","description":"ID of the chapter","example":1},"number":{"type":"number","description":"Number of the chapter","example":1},"title":{"type":"string","description":"Title of the chapter","example":"Chapter 1: The Beginning"},"summary":{"type":"string","description":"Summary of the chapter","example":"This chapter introduces the main characters and sets the stage for the story."},"content":{"type":"string","description":"Content of the chapter","example":"Once upon a time, in a small town called Hill House, there lived a family..."},"background_sound":{"type":"string","description":"Background sound for the chapter","example":"wind.mp3"},"story_id":{"type":"number","description":"ID of the story this chapter belongs to","example":1},"created_at":{"format":"date-time","type":"string"},"updated_at":{"format":"date-time","type":"string"}},"required":["title","summary"]},"PublishingDto":{"type":"object","properties":{"id":{"type":"number"},"story_id":{"type":"number"},"title":{"type":"string"},"description":{"type":"string"},"tags":{"type":"array","items":{"type":"string"}},"youtube_id":{"type":"string"},"patreon_published":{"type":"boolean"}},"required":["id","story_id","title","description","tags","youtube_id","patreon_published"]},"TypeDto":{"type":"object","properties":{"id":{"type":"number"},"name":{"type":"string","description":"Type of the story","example":"Horror"},"story_prompt":{"type":"string","description":"Story prompt","example":"Prompt to create a story"},"chapter_prompt":{"type":"string","description":"Chapter prompt","example":"Prompt to create a chapter"},"image_prompt":{"type":"string","description":"Image prompt","example":"Prompt to create a background image"},"sound_prompt":{"type":"string","description":"Sound prompt","example":"Prompt to find a matching background sound"},"youtube_channel_id":{"type":"string","description":"Youtube channel ID","example":"UC_9-kyTW8ZkZNDHQJ6FgpwQ"},"youtube_playlist_id":{"type":"string","description":"Youtube playlist ID","example":"PL1234567890"},"chapter_count":{"type":"number","description":"Number of chapters to generate","example":3},"word_count":{"type":"number","description":"Minimum word count for the story","example":1000}},"required":["id","name","story_prompt","chapter_prompt","image_prompt","sound_prompt","youtube_channel_id","youtube_playlist_id","chapter_count","word_count"]},"StoryDto":{"type":"object","properties":{"id":{"type":"number","description":"ID of the story","example":1},"name":{"type":"string","description":"Title of the story","example":"The Haunting of Hill House"},"synopsis":{"type":"string","description":"Synopsis of the story","example":"A family moves into a haunted house and discovers its dark secrets."},"audio_url":{"type":"string"},"image_prompt":{"type":"string"},"background_image":{"type":"string"},"thumbnail_url":{"type":"string"},"video_url":{"type":"string"},"chapters":{"description":"Array of chapters in the story","type":"array","items":{"$ref":"#/components/schemas/ChapterDto"}},"publishings":{"type":"array","items":{"$ref":"#/components/schemas/PublishingDto"}},"types_id":{"type":"number","description":"ID of the story type","example":1},"types":{"$ref":"#/components/schemas/TypeDto"},"created_at":{"format":"date-time","type":"string"},"updated_at":{"format":"date-time","type":"string"}},"required":["name","synopsis","audio_url","image_prompt","background_image","thumbnail_url","video_url","chapters","types_id","types"]}}}}